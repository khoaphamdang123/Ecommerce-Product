
<!-- =========================================================
* Sneat - Bootstrap 5 HTML Admin Template - Pro | v1.0.0
==============================================================

* Product Page: https://themeselection.com/products/sneat-bootstrap-html-admin-template/
* Created by: ThemeSelection
* License: You must have a valid license purchased in order to legally use the theme for your project.
* Copyright ThemeSelection (https://themeselection.com)

=========================================================
 -->
<!-- beautify ignore:start -->
@{
   var created_category=ViewBag.Created_Category;
   var create_status=ViewBag.Status;
   var cat_list =ViewBag.CategoryList as IEnumerable<Category>;
   var brand_list = ViewBag.BrandList as IEnumerable<Brand>;
   var sub_cat_list = ViewBag.SubCatList as List<SubCategory>; 
}


@if(create_status==0 || create_status==-1)
    {
      <div
       class="bs-toast toast fade hide bg-danger toast-placement-ex top-5 end-0"
       role="alert"
       aria-live="assertive"
       aria-atomic="true"
       data-bs-dismiss="toast"
        style="cursor: pointer;"
         data-delay="3000"
         data-bs-autohide="true" 
         data-bs-delay="3000"
             >
                        <div class="toast-header">
                          <i class="bx bx-bell me-2"></i>
                          <div class="me-auto fw-semibold">Thêm sản phẩm</div>
                          <!--<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>-->
                        </div>
                        <div class="toast-body">
                         @created_category
                        </div>
                      </div>
                        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var toastEl = document.querySelector('.toast');
                var toast = new bootstrap.Toast(toastEl);
                toast.show();
            });
        </script>
    }

@if(create_status==1)
{ 
    <div
       class="bs-toast toast fade hide bg-success toast-placement-ex top-5 end-0"
       role="alert"
       aria-live="assertive"
       aria-atomic="true"
        data-bs-dismiss="toast"
        style="cursor: pointer;"
         data-delay="3000"
         data-bs-autohide="true" 
         data-bs-delay="3000"
             >
                        <div class="toast-header">
                          <i class="bx bx-bell me-2"></i>
                          <div class="me-auto fw-semibold">Thêm sản phẩm</div>
                        </div>
                        <div class="toast-body">
                         @created_category
                        </div>
                      </div>
                <script>
            document.addEventListener('DOMContentLoaded', function() {
                var toastEl = document.querySelector('.toast');
                var toast = new bootstrap.Toast(toastEl);
                toast.show();
            });
        </script>
}
    
          <div class="content-wrapper">
            <div class="container-xxl flex-grow-1 container-p-y">
              <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Product /</span>Thêm Product</h4>
              <div class="row">
                <div class="col-md-12">
                  <div class="d-flex justify-content-between align-items-start mb-3">
                    <div class="nav nav-pills">
                      <a class="nav-link active" href="javascript:void(0);"><i class="bx bx-cart-alt me-1"></i>Sản phẩm</a>
                    </div>
                    <button type="submit" class="btn btn-primary">Thêm sản phẩm</button>
                  </div>
                  <div class="card mb-4">
                    <h5 class="card-header">Thông tin sản phẩm</h5>
              
                    <hr class="my-0" />
                    <div class="card-body">
                      <form id="formAccountSettings" method="post" asp-controller="CategoryList" asp-action="AddCategory">
                        <div class="row">
                          <div class="mb-3 col-md-6">
                            <label for="product" class="form-label">Tên sản phẩm</label>
                            <input
                              class="form-control"
                              type="text"
                              id="product"
                              name="product"
                              autofocus
                              placeholder="Nhập tên sản phẩm"
                            />
                          <span id="category-error" class="text-danger"></span>
                          </div>
                        </div>
                        <div class="row mb-3">
                         <div class="col">
                            <label class="form-label" for="price">
                                Giá
                            </label>
                           <input type="number" class="form-control" placeholder="Giá sản phẩm" name="price" id="price">
                         </div>
                        <div class="col">
                            <label class="form-label" for="quantity">
                               Số lượng sản phẩm
                            </label>
                           <input type="number" class="form-control" placeholder="Số lượng" name="quantity" id="quantity">
                        </div>  
                        </div>
                        <div class="row mt-3">
                         <div class="col">
                            <label class="form-label" for="subcategory">Chọn loại sản phẩm phụ</label>
                            <select class="form-select select-2" id="sub-select" name="subcategory">
                              <option value="">Chọn loại sản phẩm phụ</option>
                              @foreach(var subcat in sub_cat_list)
                              {
                                <option value="@subcat.Id">@subcat.SubCategoryName</option>
                              }
                            </select>
                         </div>
                            <div class="col">
                            <label class="form-label" for="category">Chọn loại sản phẩm</label>
                            <select class="form-select select-2" name="category" id="cat-select">
                              <option value="">Chọn loại sản phẩm</option>
                              @foreach(var cat in cat_list)
                              {
                                <option value="@cat.Id">@cat.CategoryName</option>
                              }
                            </select>
                         </div>
                             <div class="col">
                            <label class="form-label" for="brand">Chọn nhãn hàng</label>
                            <select class="form-select select-2">
                              <option value="">Chọn nhãn hàng</option>
                              @foreach(var brand in brand_list)
                              {
                                <option value="@brand.Id">@brand.BrandName</option>                                
                              }
                            </select>
                         </div>  
                        </div> 
                        <div class="mt-5">
                          <button type="submit" class="btn btn-primary me-2">Thêm loại sản phẩm</button>
                        </div>
                      </form>
                    </div>
                    <!-- /Account -->
                  </div>

                  <div class="card mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0 card-title">Hình ảnh sản phẩm</h5>
                </div>
             <hr class="my-0" />
                <div class="card-body">
                  <div class="drop-zone" id="drop-zone">
    <input type="file" id="fileInput" class="file-input" accept="image/*" hidden />
    <div class="drop-zone-message" id="drop-zone-message">
        Kéo và thả hình ảnh vào đây hoặc
        <button type="button" id="fileInputButton" class="upload-button">Chọn File</button>
    </div>
    <div id="previewImageContainer" class="image-preview-container"></div>
</div>
        </div>
        </div>
                <div class="card mb-4">
                    <div class="card-header">
                      <h5 class="mb-0 card-title">Miêu tả sản phẩm</h5>
                    </div>
                    <hr class="my-0" />
                    <div class="card-body">
                    <div id="Description" name="description" style="height: 300px;"></div>
                    </div>
                </div>
             <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0 card-title">Miêu tả trong hộp</h5>
                    </div>
                    <hr class="my-0" />
                    <div class="card-body">
                 <div id="Description-Inbox" name="inboxdescription" style="height: 300px;"></div>
                    </div>
                </div>
            
             <div class="card mb-4">
                    <div class="card-header">
                    <h5 class="mb-0 card-title">Miêu tả giảm giá</h5>
                    </div>
                    <hr class="my-0"/>
                    <div class="card-body">
                    <div id="Discount-Description" name="DiscountDescription" style="height: 300px;"></div>
                    </div>
                </div>
            
             <div class="card mb-4">
                    <div class="card-header">
                  <h5 class="mb-0 card-title">Mẫu khác</h5>
                    </div>
                    <hr class="my-0"/>
                    <div class="card-body">
                  <form class="form-repeater">
                   <div class="group mb-4" id="group-list" data-repeater-list>
                    <div class="data-repeater-item">
                        <div class="row g-6 mb-6">
                        <div class="col-4">
                          <label class="form-label" for="color">Màu sắc</label> 
                          <input class="form-control" name="color" id="color" type="text" placeholder="Nhập màu sắc">
                        </div>
                          <div class="col-4">
                          <label class="form-label" for="weight">Khối lượng</label> 
                          <input class="form-control" name="color" id="color" type="number" placeholder="Nhập khối lượng">
                        </div>
                            <div class="col-4 mb-2">
                          <label class="form-label" for="version">Phiên bản</label> 
                          <input class="form-control" name="version" id="version" placeholder="Nhập phiên bản">
                        </div>
                        <div class="col-4 mb-3">
                          <label class="form-label" for="mirror">Loại kính</label> 
                          <input class="form-control" name="mirror" id="mirror" placeholder="Nhập loại kính">
                        </div>
                        </div>
                    </div>
                   </div>
                   <div class="d-flex justify-content-center">
                    <button type="button" class="btn btn-primary" id="add-variant"><i class="bx bx-plus bx-sm me-2"></i>Thêm mẫu khác</button>
                   </div>
                  </form>
                    </div>
                </div>
                </div>
              </div>
            </div>
        
            <footer class="content-footer footer bg-footer-theme">
              <div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
                <div class="mb-2 mb-md-0">
                  ©
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  , made with ❤️ by
                  <a href="https://themeselection.com" target="_blank" class="footer-link fw-bolder">ThemeSelection</a>
                </div>
                <div>
                  <a href="https://themeselection.com/license/" class="footer-link me-4" target="_blank">License</a>
                  <a href="https://themeselection.com/" target="_blank" class="footer-link me-4">More Themes</a>

                  <a
                    href="https://themeselection.com/demo/sneat-bootstrap-html-admin-template/documentation/"
                    target="_blank"
                    class="footer-link me-4"
                    >Documentation</a
                  >

                  <a
                    href="https://github.com/themeselection/sneat-html-admin-template-free/issues"
                    target="_blank"
                    class="footer-link me-4"
                    >Support</a
                  >
                </div>
              </div>
            </footer>
            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        <!-- / Layout page -->

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div> 
<script>
document.addEventListener("DOMContentLoaded", function (event) {
 
  new FroalaEditor('#Description',{
 heightMin: 300,
      toolbarButtons: ['bold', 'italic', 'underline', '|','color', 'backgroundColor', 'insertTable', 'undo', 'redo'],
      pluginsEnabled: ['table','colors'],
      colorsBackground: ['#FFFFFF', '#FF0000', '#00FF00', '#0000FF', '#FFFF00'],
     colorsText: ['#000000', '#FF0000', '#00FF00', '#0000FF', '#FFFF00'] 
  });

  new FroalaEditor('#Description-Inbox',{
    heightMin: 300,
      toolbarButtons: ['bold', 'italic', 'underline', '|','color', 'backgroundColor', 'insertTable', 'undo', 'redo'],
      pluginsEnabled: ['table','colors'],
      colorsBackground: ['#FFFFFF', '#FF0000', '#00FF00', '#0000FF', '#FFFF00'],
      colorsText: ['#000000', '#FF0000', '#00FF00', '#0000FF', '#FFFF00'] 
  });

  new FroalaEditor('#Discount-Description',{
    heightMin: 300,
      toolbarButtons: ['bold', 'italic', 'underline', '|','color', 'backgroundColor', 'insertTable', 'undo', 'redo'],
      pluginsEnabled: ['table','colors'],
      colorsBackground: ['#FFFFFF', '#FF0000', '#00FF00', '#0000FF', '#FFFF00'],
     colorsText: ['#000000', '#FF0000', '#00FF00', '#0000FF', '#FFFF00'] 
  });
});



   
 const add_variant=document.getElementById("add-variant");

add_variant.addEventListener('click',()=>{
        
        const groupList = document.getElementById('group-list');
        
        const firstRow = document.querySelector('.data-repeater-item');
        
        const newRow = firstRow.cloneNode(true);

        newRow.querySelectorAll('input').forEach(input => input.value = '');

        groupList.appendChild(newRow);

         setTimeout(()=>{
            newRow.classList.add('show');
        },10)

        
});

 const sub_select=document.getElementById("sub-select");
 
 const cat_select = document.getElementById("cat-select");
 
 const drop_zone=document.getElementById("drop-zone");

 const drop_zone_msg=document.getElementById("drop-zone-message");
 
 const file_input = document.getElementById("fileInput");
 
 const file_input_btn = document.getElementById("fileInputButton");

 const preview_img = document.getElementById("previewImageContainer");

 file_input_btn.addEventListener("click",()=>{e.preventDefault();file_input.click();});



 const handleFiles=(e)=>
 { 
   const files=e.target.files;
   if(files.length)
   {
    drop_zone_msg.style.display='none';
    drop_zone.style.alignItems='start';
    const file = files[0];
    const file_reader= new FileReader();
    file_reader.onload=(event)=>
    {  const img=document.createElement("img");
       
       const img_wrapper=document.createElement('div');
       
       img_wrapper.classList.add("card-1");

       img.src=event.target.result;
       
       img.classList.add("card-img-top");

        const cardBody = document.createElement('div');
        cardBody.classList.add('card-body-1');
      
        const cardTitle = document.createElement('h5');
        cardTitle.classList.add('card-title-1');
        cardTitle.textContent = file.name;
       const remove_btn=document.createElement("button");
       remove_btn.textContent='Xóa';
       remove_btn.classList.add('btn', 'btn-danger', 'remove-btn');
       remove_btn.onclick=(e)=>{
       e.stopPropagation();
       preview_img.removeChild(img_wrapper);
       if(!preview_img.hasChildNodes())
       {
        drop_zone.style.alignItems='center';

        drop_zone_msg.style.display='block';
       }
       };
       cardBody.appendChild(cardTitle);

       cardBody.appendChild(remove_btn);

       img_wrapper.appendChild(img)
       ;
       img_wrapper.appendChild(cardBody);

       preview_img.appendChild(img_wrapper);
    };
    file_reader.readAsDataURL(file);
    }
 }


 file_input.addEventListener("change",handleFiles);
 
 drop_zone.addEventListener("dragover",(e)=>{
     e.preventDefault();
     drop_zone.classList.add("dragging");
 });

 drop_zone.addEventListener("dragleave",()=>{
   drop_zone.classList.remove("dragging");
 });

 drop_zone.addEventListener("drop",(e)=>{
  e.preventDefault();
  drop_zone.classList.remove("dragging");
  const files = e.dataTransfer.files;
  if(files.length)
  {
    handleFiles({target:{files:files}});
  }
 });


 drop_zone.addEventListener("click",()=>
 {
    file_input.click();
 });



 sub_select.addEventListener("change",()=>{
    var sub_index=sub_select.selectedIndex;
  if(sub_index!=0)
  {
   cat_select.selectedIndex=0;
   cat_select.disabled=true;
   }
   else
   {
    cat_select.disabled=false;
   }
 });

 document.getElementById("formAccountSettings").addEventListener("submit",()=>{
  var is_valid=true;
  var category=document.getElementById("category").value.trim();
  if(category==='')
  {
    is_valid=false;
    document.getElementById("category-error").innerHTML='Không được để trống thông tin này';
  }

  if(!is_valid)
  {
    event.preventDefault();
  }  
 });
  
  document.getElementById("upload").addEventListener("change",()=>
  {
    var image_input=document.getElementById("upload");
    var image_hoder=document.getElementById("uploadedAvatar");
    const file=image_input.files[0];
    if(file)
    {
     const reader = new FileReader();
     reader.onload=(e)=>{
     }
     reader.readAsDataURL(file);
    }
  });

  document.getElementById("delete-avatar").addEventListener("click",()=>
  {
   var image_holder = document.getElementById("uploadedAvatar");
   var img_file='https://cdn-icons-png.flaticon.com/128/16955/16955062.png';
   image_holder.src=img_file;
  });

</script>
